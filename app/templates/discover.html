<head>
    <style>
        /* Navbar Styling */
        .navbar-custom {
            background-color: #3c5376 !important;
            padding: 10px 20px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Input and Dropdown Styling */
        .searcher {
            color: #ffffff !important;
            background-color: #3586fd !important;
            border: 2px solid #3c5376 !important;
            min-width: 150px !important; 
            border: #ffffff;
            border-radius: 6px !important;
            transition: background-color 0.3s ease-in-out !important;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1) !important;
        }

        .searcher:hover {
            background-color: #0d6efd;
        }

        .event-card {
            border: 2px solid #3c5376;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .event-image {
            background-color: #3c5376;
            border-radius: 10px;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #ffffff;
        }

        /* Popup modal */
        .popup {
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: auto;
            background: white;
            display: none; /* Initially hidden */
            z-index: 1000;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .popup img {
            width: 100%;
            height: auto;
            object-fit: contain;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* Popup close button */
        .popup-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            color: black;
            background: none;
            border: none;
            cursor: pointer;
        }

        /* Image hover effects */
        img {
            transition: border 0.3s ease, box-shadow 0.3s ease;
        }

    </style>
</head>

<script>
    // Function to show the popup when an image is clicked
    function showPopup(card) {
        const popup = document.getElementById('popup' + card);
        popup.style.display = 'block';
    }

    // Function to hide the popup
    function exitPopup(card) {
        const popup = document.getElementById('popup' + card);
        popup.style.display = 'none';
    }
</script>

{% extends "base.html" %}

{% block content %}
<body>
    <!-- Navbar (One Line) -->
    <div class="container-fluid navbar-custom text-white">
        <div class="d-flex flex-nowrap justify-content-between align-items-center">

            <!-- Search Bar (Expands) -->
            <input type="text" placeholder="Search events..." class="form-control flex-grow-1 mx-2">

            <!-- Date Picker -->
            <input type="date" class="form-control flex-grow-1 mx-2" id="start-date">

            <!-- Category Dropdown -->
            <select class="form-select searcher mx-2" id="category" name="category">
                <option selected disabled>Category</option>
                <option value="poverty">End Poverty</option>
                <option value="hunger">End Hunger</option>
                <option value="health">Good Health</option>
                <option value="education">Quality Education</option>
                <option value="equality">Gender Equality</option>
                <option value="water">Clean Water and Sanitation</option>
                <option value="energy">Clean Energy</option>
                <option value="growth">Economic Growth</option>
                <option value="inequality">Reducing Inequalities</option>
                <option value="cities">Sustainable Cities and Communities</option>
                <option value="consumption">Responsible Consumption</option>
                <option value="planet">Protect the Planet</option>
                <option value="peace">Peace and Justice</option>
                <option value="other">Other</option>
            </select>

            <!-- Society Dropdown -->
            <select class="form-select searcher mx-2" id="society" name="society">
                <option selected disabled>Society</option>
                {% for Society in Society %}
                    <option value="{{ Society }}">{{ Society }}</option>
                {% endfor %}
            </select>

            <!-- Search Button -->
            <button type="submit" class="btn searcher">Search</button>
        </div>
    </div>

    <!-- Event Cards -->

    {% for event in events %}
        <div class="container py-4">
            <div class="row justify-content-center mb-3" onclick="showPopup('{{ forloop.counter }}')">
                <div class="col-md-8">
                    <div class="event-card row">
                        <div class="col-md-8">
                            <h2 style="color: #0d6efd;">{{ event.name }}</h2>
                            <p class="mb-2"><strong>Date:</strong> {{event.date}}</p>
                            <p>{{event.description}}</p>
                        </div>
                        <div class="col-md-4">
                            <div class="event-image">{{event.image}}</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="popup" id="popup{{ forloop.counter }}">
                <button class="popup-close" onclick="exitPopup('{{ forloop.counter }}')">X</button>
                <h2 style="color: #0d6efd;">{{ event.name }}</h2>
                    <p class="mb-2"><strong>Date:</strong> {{event.date}}</p>
                    <p>{{event.description}}</p>
                    <div class="col-md-4">
                        <div class="event-image">{{event.image}}</div>
                </div>
            </div>
    {% empty %}
        <p class="text-muted text-center">No sustainable events found. Check back soon!</p>
    {% endfor %}

    <!-- CoreUI JS -->
    <script src="https://cdn.jsdelivr.net/npm/@coreui/coreui@4.6.1/dist/js/coreui.bundle.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var datePickers = document.querySelectorAll('[data-coreui-toggle="date-picker"]');
            datePickers.forEach(function(datePicker) {
                new coreui.DatePicker(datePicker, {
                    locale: "en-US",
                    calendarDate: new Date(),
                    format: 'yyyy/mm/dd',
                });
            });
        });
    </script>
</body>
{% endblock %}
